## å˜é‡å’Œå¯å˜æ€§

Rust å®šä¹‰çš„å˜é‡é»˜è®¤æ˜¯ä¸å¯æ”¹å˜çš„ï¼ˆimmutableï¼‰ï¼Œå½“å˜é‡ä¸å¯å˜æ—¶ï¼Œä¸€æ—¦å€¼è¢«ç»‘å®šä¸€ä¸ªåç§°ä¸Šï¼Œä½ å°±ä¸èƒ½æ”¹å˜è¿™ä¸ªå€¼ã€‚

> æ–‡ä»¶åï¼š_src/main.rs_

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {x}");
    x = 8;
    println!("The value of x is: {x}");
}
```

ä¿å­˜å¹¶ä½¿ç”¨ `cargo run ` è¿è¡Œç¨‹åºã€‚ä¼šæŸ¥çœ‹åˆ°å¯ä»¥å†æ¬¡èµ‹å€¼ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾ï¼š

![ä¸å¯å˜é‡èµ‹å€¼](./assets/images/02/ä¸å¯å˜é‡èµ‹å€¼.png)

è‹¥éœ€è¦èƒ½å¤Ÿæ”¹å˜å®šä¹‰çš„å˜é‡åå‰åŠ  `mut` ä½¿å…¶å¯å˜

> ä¿®æ”¹ _src/main.rs_

```rust
fn main() {
    let mut x = 5;
    println!("The value of x is: {x}");
    x = 8;
    println!("The value of x is: {x}");
}
```

è¿è¡Œç¨‹åºï¼Œå¦‚ä¸‹å›¾ï¼š

![mut ä½¿å¾—å˜é‡å¯å˜](./assets/images/02/mut%20ä½¿å¾—å˜é‡å¯å˜.png)

## å¸¸é‡

å¸¸é‡ (constants) æ˜¯ç»‘å®šåˆ°ä¸€ä¸ªåç§°çš„ä¸å…è®¸æ”¹å˜çš„å€¼ï¼Œä¸è¿‡å¸¸é‡ä¸å˜é‡è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«ã€‚

- ä¸å…è®¸å¯¹å¸¸é‡ä½¿ç”¨ `mut`
- å¿…é¡»æ ‡æ³¨ç±»å‹
- å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸå£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸ
- åªèƒ½è¢«è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸å¯ä»¥æ˜¯å…¶ä»–ä»»ä½•åªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—å‡ºçš„å€¼

> Rust å¯¹å¸¸é‡å‘½åçº¦å®šå•è¯ä¹‹é—´ä½¿ç”¨ **å…¨å¤§å†™** åŠ  **ä¸‹åˆ’çº¿**  
> æœ‰å…³å£°æ˜å¸¸é‡æ—¶å¯ä»¥ä½¿ç”¨å“ªäº›æ“ä½œçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… [Rust Reference çš„å¸¸é‡æ±‚å€¼éƒ¨åˆ†](https://doc.rust-lang.org/reference/const_eval.html 'const_eval')

ä¾‹å¦‚ï¼š

```rust
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

## éšè—

å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸ä¹‹å‰å˜é‡åŒåçš„æ–°å˜é‡ã€‚è¢«ç§°ä¹‹ä¸ºç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ª éšè—ï¼ˆShadowingï¼‰ äº†ï¼Œè¿™æ„å‘³ç€å½“æ‚¨ä½¿ç”¨å˜é‡çš„åç§°æ—¶ï¼Œç¼–è¯‘å™¨å°†çœ‹åˆ°ç¬¬äºŒä¸ªå˜é‡ã€‚å®é™…ä¸Šï¼Œç¬¬äºŒä¸ªå˜é‡â€œé®è”½â€äº†ç¬¬ä¸€ä¸ªå˜é‡ï¼Œ_æ­¤æ—¶ä»»ä½•ä½¿ç”¨è¯¥å˜é‡åçš„è¡Œä¸ºä¸­éƒ½ä¼šè§†ä¸ºæ˜¯åœ¨ä½¿ç”¨ç¬¬äºŒä¸ªå˜é‡ï¼Œç›´åˆ°ç¬¬äºŒä¸ªå˜é‡è‡ªå·±ä¹Ÿè¢«éšè—æˆ–ç¬¬äºŒä¸ªå˜é‡çš„ä½œç”¨åŸŸç»“æŸ_ã€‚å¯ä»¥ç”¨ç›¸åŒå˜é‡åç§°æ¥éšè—ä¸€ä¸ªå˜é‡ï¼Œä»¥åŠé‡å¤ä½¿ç”¨ let å…³é”®å­—æ¥å¤šæ¬¡éšè—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main () {
    let x = 5;
    let x = x + 1;
    {
        let x = x * 2;
        // æ­¤æ—¶è®¿é—®çš„ä½œç”¨åŸŸå†…çš„ x
        println!("The value of  x in the inner scope is: {x}")
    }
    // è®¿é—®çš„æ˜¯ ç¬¬äºŒæ¬¡ é‡æ–°èµ‹å€¼çš„å˜é‡ x
    println!("The value of x is: {x}");
}
```

è¿è¡Œç»“æœï¼š

![å˜é‡éšè—](./assets/images/02/å˜é‡éšè—.png)

> mut å’Œ å½±è—çš„åŒºåˆ«

å½“å†æ¬¡ä½¿ç”¨ let æ—¶ï¼Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å˜å€¼çš„ç±»å‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main () {
    let spaces = "   ";
    let spaces = spaces.len();
    println!("The value of spaces is: {spaces}")
}
```

è¿è¡Œç»“æœï¼š

![1.mutå’Œå˜é‡éšè—åŒºåˆ«](./assets/images/02/1.mutå’Œå˜é‡éšè—åŒºåˆ«.png)

å¦‚æœå°è¯•ä½¿ç”¨ mutï¼Œå°†ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘æ—¶é”™è¯¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main () {
    let mut spaces = "   ";
    let spaces = spaces.len();
    println!("The value of spaces is: {spaces}")
}
```

è¿è¡Œç»“æœï¼š

> æ­£å¸¸è¾“å‡ºç»“æœï¼Œä¼šäº§ç”Ÿè­¦å‘Šã€‚è¿™ä¸ªé”™è¯¯è¯´æ˜ï¼Œæˆ‘ä»¬ä¸èƒ½æ”¹å˜å˜é‡çš„ç±»å‹

![2.mutå’Œå˜é‡éšè—åŒºåˆ«](./assets/images/02/2.mutå’Œå˜é‡éšè—åŒºåˆ«.png)

## æ•°æ®ç±»å‹

åœ¨ Rust ä¸­ï¼Œæ¯ä¸ªå€¼éƒ½æœ‰å¯¹åº”çš„ **æ•°æ®ç±»å‹**ï¼ˆ_data type_ï¼‰ï¼Œè¢«æŒ‡å®šä¸ºä½•ç§æ•°æ®ï¼Œä»¥ä¾¿æ˜ç¡®æ•°æ®å¤„ç†æ–¹å¼ã€‚å…·ä½“ä¸¤ç±»æ•°æ®ç±»å‹å­é›†ï¼š**æ ‡é‡**ï¼ˆ_scalar_ï¼‰å’Œ **å¤åˆ**ï¼ˆ_compound_ï¼‰ã€‚

> æ³¨æ„ï¼šRust æ˜¯é™æ€ç±»å‹ï¼ˆ_statically typed_ï¼‰è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æ—¶å°±å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚æ ¹æ®å€¼åŠå…¶ä½¿ç”¨æ–¹å¼ï¼Œç¼–è¯‘å™¨é€šå¸¸å¯æ¨æ–­å‡ºæˆ‘ä»¬æƒ³è¦çš„ç±»å‹ã€‚å½“å¤šç§ç±»å‹å‡æœ‰å¯èƒ½ï¼Œå¿…é¡»å¢åŠ  **æ³¨è§£**ï¼Œä¾‹å¦‚ **çŒœæ•°å­— DEMO**ï¼šä½¿ç”¨ `parse` å°† `String` è½¬æ¢ä¸ºæ•°å­—

```rust
let guess = "30".parse().expect("Not a number!");
```

è‹¥ä¸è¿›è¡Œæ³¨è§£ï¼Œè¿è¡Œä¼šæŠ¥é”™ã€‚

![more_type_must_add_æ³¨è§£](./assets/images/02/more_type_must_add_æ³¨è§£.png)

### æ ‡é‡ç±»å‹

æ ‡é‡ï¼ˆscalarï¼‰ç±»å‹ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚Rust å››ç§åŸºæœ¬çš„æ ‡é‡ç±»å‹ï¼š**æ•´å‹**ã€**æµ®ç‚¹å‹**ã€**å¸ƒå°”ç±»å‹**ã€**å­—ç¬¦ç±»å‹**ã€‚

#### æ•´å‹

**æ•´æ•°** æ˜¯ä¸€ä¸ªæ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ã€‚

> **æœ‰ç¬¦å·** å’Œ **æ— ç¬¦å·** ä»£è¡¨æ•°å­— **èƒ½å¦ä¸ºè´Ÿå€¼** === æ•°å­—æ˜¯å¦æœ‰å¯èƒ½æ˜¯**è´Ÿæ•°**ï¼ˆ**æœ‰ç¬¦å·æ•°**ï¼‰ï¼Œæˆ–è€…æ°¸è¿œä¸º**æ­£**è€Œä¸éœ€è¦ç¬¦å·ï¼ˆ**æ— ç¬¦å·æ•°**ï¼‰

| é•¿åº¦    | æœ‰ç¬¦å· | æ— ç¬¦å· |
| ------- | ------ | ------ |
| 8-bit   | i8     | u8     |
| 16-bit  | i16    | u16    |
| 32-bit  | i32    | u32    |
| 64-bit  | i64    | u64    |
| 128-bit | i128   | u128   |
| arch    | isize  | usize  |

ä»»ä½•ä¸€ç§å½¢å¼ç¼–å†™æ•°å­—å­—é¢å€¼ã€‚

> æ³¨æ„å¯ä»¥æ˜¯å¤šç§æ•°å­—ç±»å‹çš„æ•°å­—å­—é¢å€¼å…è®¸ä½¿ç”¨ç±»å‹åç¼€ï¼Œä¾‹å¦‚ 57u8 æ¥æŒ‡å®šç±»å‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½¿ç”¨ \_ åšä¸ºåˆ†éš”ç¬¦ä»¥æ–¹ä¾¿è¯»æ•°ï¼Œä¾‹å¦‚ 1_000ï¼Œå®ƒçš„å€¼ä¸ä½ æŒ‡å®šçš„ 1000 ç›¸åŒã€‚

| æ•°å­—å­—é¢å€¼                  | ä¾‹å­        |
| --------------------------- | ----------- |
| Decimal(åè¿›åˆ¶)             | 98_222      |
| Hex(åå…­è¿›è¡Œ)               | 0xff        |
| Octal(å…«è¿›åˆ¶)               | 0o77        |
| Binary(äºŒè¿›åˆ¶)              | 0b1111_0000 |
| Byte(å•å­—èŠ‚å­—ç¬¦)[ä»…é™äº u8] | b'A'        |

> Rust çš„é»˜è®¤ç±»å‹æ˜¯i32ã€‚ isize å’Œ usize ä¸»è¦ä½œä¸ºæŸäº›é›†åˆçš„ç´¢å¼•

> **æ•´å‹æº¢å‡º**  
> æ¯”æ–¹è¯´ç±»å‹æ˜¯ `u8` ,å®ƒå¯ä»¥å­˜æ”¾ `0-255` çš„å€¼ã€‚è‹¥å€¼æ˜¯ `256` åˆ™ä¼šäº§ç”Ÿ **æ•´å‹æº¢å‡º**ï¼ˆ_Integer overflow_ï¼‰ï¼Œä¼šå¯¼è‡´ä»¥ä¸‹ä¸¤ç§è¡Œä¸ºä¹‹ä¸€çš„å‘ç”Ÿã€‚  
> 1. å½“ debug æ¨¡å¼ç¼–è¯‘ä¸‹æ—¶ï¼ŒRust æ£€æŸ¥è¿™ç±»é—®é¢˜å¹¶ç¨‹åº _panic_ã€‚
> 2. ä½¿ç”¨ `--release` flagåœ¨ release æ¨¡å¼ä¸­æ„å»ºï¼ŒRust ä¸ä¼šæ£€æŸ¥ä¼šå¯¼è‡´ _panic_ çš„æ•´å‹æº¢å‡ºï¼Œè€Œæ˜¯ä¼šè¿›è¡Œä¸€ç§**äºŒè¿›åˆ¶è¡¥ç **ï¼ˆ_tow's complement wrapping_ï¼‰çš„æ“ä½œã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ¯”æ­¤ç±»å‹èƒ½å®¹çº³æœ€å¤§å€¼è¿˜å¤§çš„å€¼ä¼šå›ç»•åˆ°æœ€å°å€¼å€¼ï¼Œ `256` å˜æˆ `0`ï¼Œå€¼ `257` å˜æˆ `1`ï¼Œä¾æ­¤ç±»æ¨ã€‚ç¨‹åºä¸ä¼š _panic_ï¼Œä¸è¿‡å˜é‡å¯èƒ½ä¹Ÿä¸ä¼šæ˜¯ä½ æ‰€æœŸæœ›çš„å€¼ã€‚ä¾èµ–æ•´å‹æº¢å‡º wrapping çš„è¡Œä¸ºè¢«è®¤ä¸ºæ˜¯ä¸€ç§é”™è¯¯ã€‚    


> **ä¸ºäº†æ˜¾å¼åœ°å¤„ç†æº¢å‡ºçš„å¯èƒ½æ€§ï¼Œå¯ä»¥ä½¿ç”¨è¿™å‡ ç±»æ ‡å‡†åº“æä¾›çš„åŸå§‹æ•°å­—ç±»å‹æ–¹æ³•ï¼š**
>  - æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ wrapping_* æ–¹æ³•è¿›è¡Œ wrappingï¼Œå¦‚ wrapping_add
>  - å¦‚æœ checked_* æ–¹æ³•å‡ºç°æº¢å‡ºï¼Œåˆ™è¿”å› Noneå€¼
>  - ç”¨ overflowing_* æ–¹æ³•è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å‡ºç°æº¢å‡º
>  - ç”¨ saturating_* æ–¹æ³•åœ¨å€¼çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼å¤„è¿›è¡Œé¥±å’Œå¤„ç†

#### æµ®ç‚¹å‹

Rust ä¹Ÿæœ‰ä¸¤ä¸ªåŸç”Ÿçš„ **æµ®ç‚¹æ•°**ï¼ˆ_floating-point numbers_ï¼‰ç±»å‹ï¼Œå®ƒä»¬æ˜¯å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚Rust çš„æµ®ç‚¹æ•°ç±»å‹æ˜¯ `f32` å’Œ `f64`ï¼Œåˆ†åˆ«å  `32` ä½å’Œ `64` ä½ã€‚é»˜è®¤ç±»å‹æ˜¯ `f64`ï¼Œæ‰€æœ‰çš„æµ®ç‚¹å‹éƒ½æ˜¯æœ‰ç¬¦å·çš„ã€‚

> æµ®ç‚¹æ•°é‡‡ç”¨ IEEE-754 æ ‡å‡†è¡¨ç¤ºã€‚`f32` æ˜¯å•ç²¾åº¦æµ®ç‚¹æ•°ï¼Œ`f64` æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ã€‚

ç¤ºä¾‹ï¼š

```rust
fn main () {
    let floats = 2.0 // f64
    let float: f32 = 3.0 // f32 
}
```

> **æ•°å€¼è¿ç®—**
> Rust ä¸­çš„æ‰€æœ‰æ•°å­—ç±»å‹éƒ½æ”¯æŒåŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ æ³•ã€å‡æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œå–ä½™ã€‚**æ•´æ•°é™¤æ³•**ä¼šå‘**é›¶èˆå…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°**ã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•åœ¨ let è¯­å¥ä¸­ä½¿ç”¨å®ƒä»¬ï¼š

```rust
fn main () {
    // åŠ æ³•
    let sum = 5 + 10;
    // å‡æ³•
    let subtraction = 10.2 - 2.7;
    // ä¹˜æ³•
    let multiplication = 4 * 20;
    // é™¤æ³•
    let quotient = 56.7 / 32.2;
    let truncated = -5 / 3; // ç»“æœä¸º -1
    // å–ä½™
    let surplus = 11 % 2; // ç»“æœä¸º 1
}
```

#### å¸ƒå°”ç±»å‹

Rust ä¸­çš„å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå€¼ï¼š`true` | `false`ã€‚Rust ä¸­çš„å¸ƒå°”ç±»å‹ä½¿ç”¨ `bool` è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼š

```rust
fn main () {
    let t = true;
    let f: bool = false; // ä½¿ç”¨æ˜¾å¼ç±»å‹æ³¨é‡Š
}
```

#### å­—ç¬¦ç±»å‹

Rust çš„ `char` ç±»å‹æ˜¯è¯­è¨€ä¸­æœ€åŸç”Ÿçš„å­—æ¯ç±»å‹ã€‚ä¸‹é¢æ˜¯ä¸€äº›å£°æ˜ `char` å€¼çš„ä¾‹å­ï¼š

```rust
fn main () {
    let c = 'z';
    let z: char = 'xxx'; // ä½¿ç”¨æ˜¾å¼ç±»å‹æ³¨é‡Š
    let emote = 'ğŸ˜»';
}
```

> æ³¨æ„ï¼š`å•å¼•å·` å£°æ˜ char `å­—é¢é‡`ï¼Œ ä½¿ç”¨ `åŒå¼•å·` å£°æ˜ `å­—ç¬¦ä¸²å­—é¢é‡`ã€‚

### å¤åˆç±»å‹

**å¤åˆç±»å‹**ï¼ˆ_Compound types_ï¼‰å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹ã€‚Rust æœ‰ä¸¤ä¸ªåŸç”Ÿçš„å¤åˆç±»å‹ï¼š**å…ƒç»„**ï¼ˆ_tuple_ï¼‰å’Œ**æ•°ç»„**ï¼ˆ_array_ï¼‰ã€‚

#### å…ƒç»„ç±»å‹

å…ƒç»„æ˜¯å°† `å¤šä¸ªä¸åŒç±»å‹çš„å€¼` ç»„åˆè¿›è¡Œä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚

> å…ƒç»„çš„é•¿åº¦å›ºå®šï¼šä¸€æ—¦å£°æ˜ï¼Œå…¶é•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°
> å…ƒç»„ç»“æ„ï¼š let å˜é‡å: (æ˜¾ç¤ºæ³¨è§£, æ˜¾ç¤ºæ³¨è§£, ...) = (å¯¹åº”æ˜¾ç¤ºæ³¨è§£ç±»å‹çš„å€¼, å¯¹åº”æ˜¾ç¤ºæ³¨è§£ç±»å‹çš„å€¼, ...);

ç¤ºä¾‹ï¼š

```rust
fn main () {
    let tup: (u32, f64, u8) = (400, 1.8, 10);
}
```
è·å–ç¤ºä¾‹çš„å•ä¸ªå€¼çš„æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…ï¼ˆpattern matchingï¼‰æ¥è§£æ„ï¼ˆdestructureï¼‰å…ƒç»„å€¼ï¼Œä¾‹å¦‚ï¼š

```rust
fn main () {
    let tup: (u32, f64, u8) = (400, 1.8, 10);
    let (x, y, z) = tmp;
    println!("The value of y is: {y}");
}
```

![å…ƒç»„è§£æ„å€¼](./assets/images/02/å…ƒç»„è§£æ„å€¼.png)

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç‚¹å· **ï¼ˆ.ï¼‰** åè·Ÿå€¼çš„ç´¢å¼•æ¥ç›´æ¥è®¿é—®å®ƒä»¬ã€‚ä¾‹å¦‚ï¼š

> å…ƒç»„çš„ç¬¬ä¸€ä¸ªç´¢å¼•å€¼æ˜¯ 0

```rust
fn main () {
    let tup: (u32, f64, u8) = (400, 1.8, 10);
    let five_hundred = tup.0; // è®¿é—®çš„æ˜¯ 400
    let six_point_four = tup.1; // è®¿é—®çš„æ˜¯ 1.8
    let one = tup.2; // è®¿é—®çš„æ˜¯ 10
}
```

> ä¸å¸¦ä»»ä½•å€¼çš„å…ƒç»„æœ‰ä¸ªç‰¹æ®Šçš„åç§°ï¼Œå«åš `å•å…ƒ`ï¼ˆ_unit_ï¼‰ å…ƒç»„ã€‚è¿™ç§å€¼ä»¥åŠå¯¹åº”çš„ç±»å‹éƒ½å†™ä½œ **()**ï¼Œè¡¨ç¤ºç©ºå€¼æˆ–ç©ºçš„è¿”å›ç±»å‹ã€‚å¦‚æœè¡¨è¾¾å¼ä¸è¿”å›ä»»ä½•å…¶ä»–å€¼ï¼Œåˆ™ä¼šéšå¼è¿”å›å•å…ƒå€¼ã€‚

#### æ•°ç»„ç±»å‹

å¦ä¸€ä¸ªåŒ…å«å¤šä¸ªå€¼çš„æ–¹å¼æ˜¯ **æ•°ç»„**ï¼ˆ_array_ï¼‰ã€‚ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„ä¸­çš„ `æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒ`ã€‚Rust ä¸­çš„æ•°ç»„ä¸ä¸€äº›å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼ŒRust ä¸­çš„ `æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„`ã€‚

> vector ç±»å‹æ˜¯æ ‡å‡†åº“æä¾›çš„ä¸€ä¸ª å…è®¸ å¢é•¿å’Œç¼©å°é•¿åº¦çš„ç±»ä¼¼æ•°ç»„çš„é›†åˆç±»å‹, 

ç¤ºä¾‹ï¼š

```rust
fn main () {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}
```
**æ— æ•ˆæ•°ç»„å…ƒç´ è®¿é—®**

ç¤ºä¾‹ï¼š
```rust

use std::io;

fn main () {
    let a = [1, 2, 3, 4, 5];
    println!("Please enter an array index.");
    let mut index = String::new();
    io::stdin()
        .read_line(&mut index)
        .expect("Failed to read line.");

    let index: usize = index
        .trim()
        .parse()
        .expect("index entered was not number.");
    let element = a[index];
    println!("The value of the element at index {index} is: {element}");
}
```
æ‰§è¡Œä¸Šè¿°ä»£ç ä¸¤ç§æƒ…å†µï¼š

- æ­£å¸¸è¾“å…¥index(0~4):  
![æ­£å¸¸è¾“å…¥](./assets/images/02/æ­£å¸¸è¾“å…¥index.png)

- å¼‚å¸¸è¾“å…¥index: 

![å¼‚å¸¸è¾“å…¥](./assets/images/02/å¼‚å¸¸è¾“å…¥index.png)


## å‡½æ•°

Rust ä»£ç ä¸­çš„å‡½æ•°å’Œå˜é‡åä½¿ç”¨ `snake case` è§„èŒƒé£æ ¼ã€‚åœ¨ snake case ä¸­ï¼Œæ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å†™å¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°å®šä¹‰ç¤ºä¾‹çš„ç¨‹åºï¼š

```rust
fn main () {
  println!("Hello World!");
  another_function();
}
// å‡½æ•°å‘½åè§„èŒƒ
fn another_function () {
  println!("another_function");
}
```

#### å‚æ•°

å®šä¹‰ä¸ºæ‹¥æœ‰ **å‚æ•°**ï¼ˆ_parameters_ï¼‰çš„å‡½æ•°ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š

>åœ¨å‡½æ•°ç­¾åä¸­ï¼Œ**å¿…é¡»** å£°æ˜æ¯ä¸ªå‚æ•°çš„ç±»å‹

```rust
fn main () {
    println!("Hello World!");
    another_params(10);
}

fn another_params (x: u32) {
    println!("The value of x is: {x}");
}
```

#### è¯­å¥å’Œè¡¨è¾¾å¼
å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—çš„è¯­å¥å’Œä¸€ä¸ªå¯é€‰çš„ç»“å°¾è¡¨è¾¾å¼æ„æˆã€‚**è¯­å¥**ï¼ˆ_Statements_ï¼‰æ˜¯æ‰§è¡Œä¸€äº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚ **è¡¨è¾¾å¼**ï¼ˆ_Expressions_ï¼‰è®¡ç®—å¹¶äº§ç”Ÿä¸€ä¸ªå€¼ã€‚

**è¯­å¥**

> æ³¨ï¼šå…¶ä»–è¯­è¨€ä¸­å¯ä»¥ `x = y = 6`ï¼Œ _Rust_ ä¸­ä¸èƒ½è¿™æ ·å†™ã€‚ 

```rust
fn main() {
    let y = 6;
}
```

**è¡¨è¾¾å¼**
> æ³¨ï¼š`x+1` è¿™ä¸€è¡Œåœ¨**ç»“å°¾æ²¡æœ‰åˆ†å·**ï¼Œä¸ä½ è§è¿‡çš„å¤§éƒ¨åˆ†ä»£ç è¡Œä¸åŒã€‚**è¡¨è¾¾å¼çš„ç»“å°¾æ²¡æœ‰åˆ†å·**ã€‚å¦‚æœåœ¨è¡¨è¾¾å¼çš„ç»“å°¾åŠ ä¸Šåˆ†å·ï¼Œå®ƒå°±å˜æˆäº†è¯­å¥ï¼Œè€Œè¯­å¥ä¸ä¼šè¿”å›å€¼ã€‚åœ¨æ¥ä¸‹æ¥æ¢ç´¢å…·æœ‰è¿”å›å€¼çš„å‡½æ•°å’Œè¡¨è¾¾å¼æ—¶è¦è°¨è®°è¿™ä¸€ç‚¹ã€‚

```rust
fn main () {
    let y = {
        let x = 6;
        x + 1
    };
    println!("The value of y is: {y}");
}
// ä¸Šè¿°æ¡ˆä¾‹ï¼Œè¡¨è¾¾å¼
// {
//     let x = 6;
//     x + 1
// }
// æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå®ƒçš„å€¼æ˜¯ 4ã€‚
```

#### å…·æœ‰è¿”å›å€¼çš„å‡½æ•°

å‡½æ•°å¯ä»¥å‘è°ƒç”¨å®ƒçš„ä»£ç è¿”å›å€¼ã€‚æˆ‘ä»¬å¹¶ä¸å¯¹è¿”å›å€¼å‘½åï¼Œä½†è¦åœ¨**ç®­å¤´ï¼ˆ->ï¼‰åå£°æ˜å®ƒçš„ç±»å‹**ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ç­‰åŒäºå‡½æ•°ä½“æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚ä½¿ç”¨ return å…³é”®å­—å’ŒæŒ‡å®šå€¼ï¼Œå¯ä»å‡½æ•°ä¸­æå‰è¿”å›ï¼›ä½†**å¤§éƒ¨åˆ†å‡½æ•°éšå¼çš„è¿”å›æœ€åçš„è¡¨è¾¾å¼**ã€‚

ç¤ºä¾‹1ï¼š
```rust
fn five() -> i32 {
    5
}

fn main () {
    let x = five();
    println!("The value of x is: {x}");
}
```
åœ¨ five å‡½æ•°ä¸­æ²¡æœ‰å‡½æ•°è°ƒç”¨ã€å®ã€ç”šè‡³æ²¡æœ‰ let è¯­å¥ â€”â€” åªæœ‰æ•°å­— 5ã€‚åœ¨**Rust ä¸­æ˜¯ä¸€ä¸ªå®Œå…¨æœ‰æ•ˆçš„å‡½æ•°**ã€‚æ³¨æ„ï¼Œä¹ŸæŒ‡å®šäº†å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå°±æ˜¯ -> i32ã€‚

ç¤ºä¾‹2ï¼š
```rust
fn plus_one(x: i32) -> i32 {
    // x + 1
    x + 1;
}

fn main () {
    let x = plus_one(10);
    println!("The value of x is: {x}");
}
```

è¿è¡Œä»£ç ä¼šæ‰“å°å‡º `The value of x is: 6`ã€‚ä½†å¦‚æœåœ¨åŒ…å« x + 1 çš„è¡Œå°¾åŠ ä¸Šä¸€ä¸ª`åˆ†å·`ï¼ŒæŠŠå®ƒä»è¡¨è¾¾å¼å˜æˆè¯­å¥ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°ä¸€ä¸ªé”™è¯¯ã€‚

![x + 1 çš„è¡Œå°¾åŠ ä¸Šä¸€ä¸ªåˆ†å·](./assets/images/02/x%20+%201%20çš„è¡Œå°¾åŠ ä¸Šä¸€ä¸ªåˆ†å·.png)

## æ³¨é‡Š

```rust
# è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ³¨é‡Šï¼š

// hello, world

# æ³¨é‡Šä¹Ÿå¯ä»¥æ”¾åœ¨åŒ…å«ä»£ç çš„è¡Œçš„æœ«å°¾ï¼š

fn main() {
    // Iâ€™m feeling lucky today
    let lucky_number = 7; // Iâ€™m feeling lucky today
}
```
> Rust è¿˜æœ‰å¦ä¸€ç§æ³¨é‡Šï¼Œç§°ä¸º**æ–‡æ¡£æ³¨é‡Š**ï¼Œåç»­è®°å½•ã€‚

## æ§åˆ¶æµ

æ ¹æ®æ¡ä»¶æ˜¯å¦ä¸ºçœŸæ¥å†³å®šæ˜¯å¦æ‰§è¡ŒæŸäº›ä»£ç ï¼Œä»¥åŠæ ¹æ®æ¡ä»¶æ˜¯å¦ä¸ºçœŸæ¥é‡å¤è¿è¡Œä¸€æ®µä»£ç çš„èƒ½åŠ›æ˜¯å¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚Rust ä»£ç ä¸­æœ€å¸¸è§çš„ç”¨æ¥æ§åˆ¶æ‰§è¡Œæµçš„ç»“æ„æ˜¯ `if` è¡¨è¾¾å¼å’Œå¾ªç¯ã€‚

#### if è¡¨è¾¾å¼

if è¡¨è¾¾å¼å…è®¸æ ¹æ®æ¡ä»¶æ‰§è¡Œä¸åŒçš„ä»£ç åˆ†æ”¯ã€‚ä½ æä¾›ä¸€ä¸ªæ¡ä»¶å¹¶è¡¨ç¤º â€œå¦‚æœæ¡ä»¶æ»¡è¶³ï¼Œè¿è¡Œè¿™æ®µä»£ç ï¼›å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œä¸è¿è¡Œè¿™æ®µä»£ç ã€‚â€

ç¤ºä¾‹1ï¼š
> ä»£ç ä¸­çš„æ¡ä»¶ **å¿…é¡»** æ˜¯ **bool** å€¼ã€‚ Rust å¹¶ä¸ä¼šå°è¯•è‡ªåŠ¨åœ°å°†éå¸ƒå°”å€¼è½¬æ¢ä¸ºå¸ƒå°”å€¼ã€‚
```rust
fn main () {
    let number = 5;
    if number < 6 {
        // å°äº 6 æ‰§è¡Œ
        println!("condition war true");
    } else {
        // å¤§äºç­‰äº 6 æ‰§è¡Œ
        println!("condition war false");
    }
}
```

#### ä½¿ç”¨ else if å¤„ç†å¤šé‡æ¡ä»¶

```rust
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}
```

è¿è¡Œååº”è¯¥èƒ½çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼š  

![ä½¿ç”¨ else if å¤„ç†å¤šé‡æ¡ä»¶](./assets/images/02/ä½¿ç”¨%20else%20if%20å¤„ç†å¤šé‡æ¡ä»¶.png)

å½“æ‰§è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œå®ƒæŒ‰é¡ºåºæ£€æŸ¥æ¯ä¸ª `if` è¡¨è¾¾å¼å¹¶æ‰§è¡Œç¬¬ä¸€ä¸ªæ¡ä»¶ä¸º `true` çš„ä»£ç å—ã€‚æ³¨æ„å³ä½¿ `6` å¯ä»¥è¢« `2` æ•´é™¤ï¼Œä¹Ÿä¸ä¼šè¾“å‡º `number is divisible by 2`ï¼Œæ›´ä¸ä¼šè¾“å‡º `else` å—ä¸­çš„ `number is not divisible by 4, 3, or 2`ã€‚åŸå› æ˜¯ `Rust åªä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªæ¡ä»¶ä¸º true çš„ä»£ç å—`ï¼Œå¹¶ä¸”ä¸€æ—¦å®ƒæ‰¾åˆ°ä¸€ä¸ªä»¥åï¼Œç”šè‡³éƒ½ä¸ä¼šæ£€æŸ¥å‰©ä¸‹çš„æ¡ä»¶äº†ã€‚

ä½¿ç”¨è¿‡å¤šçš„ else if è¡¨è¾¾å¼ä¼šä½¿ä»£ç æ˜¾å¾—æ‚ä¹±æ— ç« ï¼Œæ‰€ä»¥å¦‚æœæœ‰å¤šäºä¸€ä¸ª else if è¡¨è¾¾å¼ï¼Œæœ€å¥½é‡æ„ä»£ç ã€‚ä¸ºæ­¤ï¼Œåç»­ä¼šä»‹ç»ä¸€ä¸ªå¼ºå¤§çš„ **Rust åˆ†æ”¯ç»“æ„**ï¼ˆ_branching construct_ï¼‰ï¼Œå«åš **match**ã€‚

#### åœ¨ let è¯­å¥ä¸­ä½¿ç”¨ if

```rust
fn main () {
    let condition = true;
    let number = if condition { 5 } else { 6 };
    println!("The value of number is: {number}"); // è¾“å‡º 5
}
```

#### ä½¿ç”¨å¾ªç¯é‡å¤æ‰§è¡Œ
å¤šæ¬¡æ‰§è¡ŒåŒä¸€æ®µä»£ç æ˜¯å¾ˆå¸¸ç”¨çš„ï¼ŒRust ä¸ºæ­¤æä¾›äº†å¤šç§ **å¾ªç¯**ï¼ˆ_loops_ï¼‰ã€‚

> Rust æœ‰ä¸‰ç§å¾ªç¯ï¼š_**loop**_ã€_**while**_ ã€ _**for**_

**ä½¿ç”¨ loop é‡å¤æ‰§è¡Œä»£ç **
`loop` å…³é”®å­—å‘Šè¯‰ Rust ä¸€éåˆä¸€éåœ°æ‰§è¡Œä¸€æ®µä»£ç ç›´åˆ°ä½ æ˜ç¡®è¦æ±‚åœæ­¢ã€‚
> åœæ­¢ï¼šä½¿ç”¨ `break` å…³é”®å­—è¿›è¡Œç»“æŸå¾ªç¯

```rust
fn main () {
    loop {
        println!("execute loop!");
        // break; // è‹¥åŠ ä¸Š åˆ™æ‰§è¡Œä¸€æ¬¡ï¼Œåä¹‹ ä¸€ç›´æ‰“å° execute loop! å¯ä½¿ç”¨ ctrl + c è¿›è¡Œç»“æŸ
    }
}
```

**ä»å¾ªç¯è¿”å›å€¼**

```rust
fn main() {
    let mut counter = 0;
    let result = loop {
        counter += 1;
        if counter == 10 {
            break counter * 2;
        }
    };
    println!("The result is {result}"); // The result is 20
}
```

**å¾ªç¯æ ‡ç­¾ï¼šåœ¨å¤šä¸ªå¾ªç¯ä¹‹é—´æ¶ˆé™¤æ­§ä¹‰**

å¦‚æœå­˜åœ¨åµŒå¥—å¾ªç¯ï¼Œbreak å’Œ continue åº”ç”¨äºæ­¤æ—¶æœ€å†…å±‚çš„å¾ªç¯ã€‚ä½ å¯ä»¥é€‰æ‹©åœ¨ä¸€ä¸ªå¾ªç¯ä¸ŠæŒ‡å®šä¸€ä¸ª **å¾ªç¯æ ‡ç­¾**ï¼ˆ_loop label_ï¼‰ã€‚

```rust
fn main () {
  let mut count = 0;
  'counting_up: loop {
      println!("count = {count}");
      let mut remaining = 10;
      loop {
          println!("remaining = {remaining}");
          if remaining == 9 {
            // ç»ˆæ­¢å†…å±‚å¾ªç¯
            break;
          }
          if count == 2 {
            // ç»ˆæ­¢å¤–å±‚å¾ªç¯
            break 'counting_up;
          }
          remaining -= 1;
      }
      count += 1;
  }
  println!("END count = {count}");
}
```

#### while æ¡ä»¶å¾ªç¯

```rust
fn main () {
    let mut number = 3;
    // æ¡ä»¶ä¸º true è¾“å‡º number \ åä¹‹ LIFTOFF!
    while number != 0 {
        println!("{number}!");
         number -= 1;
    }
    println!("LIFTOFF!");
}
```

#### ä½¿ç”¨ for éå†é›†åˆ

```rust
// while å†™æ³•
fn main () {
  let list = [10, 20, 30, 40, 50];
  let mut index = 0;
  while index < list.len() {
      println!("The value of list[{index}] is: {}", list[index]);
      index += 1;
  }
}

// for å†™æ³•
fn main () {
    let list = [10, 20, 30, 40, 50];
    for item in list {
        println("the value of item is : {item}")
    }
}

// å€’è®¡æ—¶ä¾‹å­
fn main() {
    // revï¼Œç”¨æ¥åè½¬
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}
```